---
import { clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

interface Props {
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'icon';
  size?: 'sm' | 'md' | 'lg';
  class?: string;
  href?: string;
  target?: string;
  rel?: string;
  [key: string]: any; // Allow other props like onClick, type, etc.
}

const { 
    variant = 'primary', 
    size = 'md', 
    class: className,
    ...rest 
} = Astro.props;

const baseStyles = 'inline-flex items-center justify-center font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 whitespace-nowrap';

const variants = {
  primary: 'bg-primary text-white hover:bg-primary/90 shadow-lg shadow-primary/25',
  secondary: 'bg-foreground/5 text-foreground hover:bg-foreground/10 border border-foreground/10',
  outline: 'border border-foreground/10 bg-transparent hover:bg-foreground/5 text-foreground',
  ghost: 'hover:bg-primary/5 text-primary',
  icon: 'p-0 aspect-square hover:bg-foreground/5 rounded-full'
};

const sizes = {
  sm: 'text-xs px-3 py-1.5 rounded-md gap-1.5',
  md: 'text-sm px-6 py-2.5 rounded-lg gap-2',
  lg: 'text-base px-8 py-3 rounded-xl gap-2.5'
};

// Override size for icon variant
const sizeStyles = variant === 'icon' ? 'h-9 w-9' : sizes[size];

const classes = twMerge(
    baseStyles, 
    variants[variant], 
    sizeStyles,
    className
);

const Tag = Astro.props.href ? 'a' : 'button';
---

<Tag class={classes} {...rest}>
    <slot />
</Tag>
