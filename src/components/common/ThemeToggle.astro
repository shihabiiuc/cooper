---
import { Sun, Moon } from 'lucide-react';
---

<button
  id="theme-toggle"
  class="p-2 rounded-full hover:bg-white/10 transition-colors"
  aria-label="Toggle Theme"
>
  <Sun className="w-5 h-5 dark:hidden" />
  <Moon className="w-5 h-5 hidden dark:block" />
</button>

<script>
  function initThemeToggle() {
    const themeToggle = document.getElementById('theme-toggle');
    
    // Toggle theme logic
    const handleToggleClick = () => {
      const element = document.documentElement;
      element.classList.toggle('dark');
      
      const isDark = element.classList.contains('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    };

    themeToggle?.addEventListener('click', handleToggleClick);
  }

  // Run on initial load
  initThemeToggle();

  // Run on view transitions navigation
  document.addEventListener('astro:page-load', initThemeToggle);
</script>
